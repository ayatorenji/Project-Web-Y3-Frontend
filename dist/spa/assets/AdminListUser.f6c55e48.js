import{_ as U,ao as o,R as u,V as p,U as i,f as e,$ as n,a4 as D,a3 as g,Z as h,ap as b,X as w}from"./index.c99f8be1.js";import{Q as V,a as y,b as F}from"./QTable.686b00a8.js";import{a as Q,Q as c}from"./QCard.a453ff6c.js";import{Q as d}from"./QInput.7902c6d2.js";import{Q as v}from"./QForm.9535495d.js";import{Q as C}from"./QPage.9bc20ae8.js";import"./use-dark.40dd0812.js";import"./QItem.f34ee267.js";import"./use-timeout.870d955a.js";import"./use-key-composition.6e228c43.js";const k={name:"AdminListUser",data(){return{columns:[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"fullname",align:"center",label:"Full Name",field:"fullname",sortable:!0},{name:"email",align:"center",label:"Email",field:"email",sortable:!0},{name:"username",align:"center",label:"Username",field:"username",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"actions",sortable:!1}],rows:[],dialog:!1,dialogTitle:"",editingUser:!1,editFormData:{id:null,fullname:"",email:"",username:"",password:""}}},methods:{openAddUserDialog(){this.editingUser=!1,this.dialogTitle="Add New User",this.editFormData={fullname:"",email:"",username:"",password:""},this.dialog=!0},closeDialog(){this.dialog=!1},saveUser(){const s=this.editingUser?"put":"post",a=this.editingUser?`/admin/users/${this.editFormData.id}`:"/admin/users";this.$api[s](a,this.editFormData).then(m=>{o.create({type:"positive",message:`User ${this.editingUser?"updated":"added"} successfully!`}),this.dialog=!1,this.getData()}).catch(m=>{o.create({type:"negative",message:`Error ${this.editingUser?"updating":"adding"} user: `+m.message})})},getData(){this.$api.get("/admin/users").then(s=>{this.rows=s.data}).catch(s=>{o.create({type:"negative",message:"Error fetching users: "+s.message})})},openEditUserDialog(s){this.editingUser=!0,this.dialogTitle="Edit User",this.editFormData={...s},this.dialog=!0},onDelete(s){this.$api.delete(`/admin/users/${s}`).then(()=>{o.create({type:"positive",message:"User deleted successfully!"}),this.getData()}).catch(a=>{o.create({type:"negative",message:"Error deleting user: "+a.message})})}},mounted(){this.getData()}},_={class:"q-ml-sm"},A={class:"q-mt-md"};function E(s,a,m,N,l,r){return u(),p(C,{padding:""},{default:i(()=>[e(y,{rows:l.rows,columns:l.columns,"row-key":"id"},{"body-cell-actions":i(t=>[e(V,{props:t},{default:i(()=>[e(n,{flat:"",icon:"edit",onClick:f=>r.openEditUserDialog(t.row)},null,8,["onClick"]),e(n,{flat:"",icon:"delete",onClick:f=>r.onDelete(t.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),e(n,{color:"primary",label:"Add New User",onClick:r.openAddUserDialog},null,8,["onClick"]),e(F,{modelValue:l.dialog,"onUpdate:modelValue":a[4]||(a[4]=t=>l.dialog=t),persistent:""},{default:i(()=>[e(Q,null,{default:i(()=>[e(c,{class:"row items-center"},{default:i(()=>[e(D,{icon:"person",color:"primary","text-color":"white"}),g("span",_,h(l.dialogTitle),1)]),_:1}),e(c,null,{default:i(()=>[e(v,{onSubmit:b(r.saveUser,["prevent"])},{default:i(()=>[e(d,{modelValue:l.editFormData.fullname,"onUpdate:modelValue":a[0]||(a[0]=t=>l.editFormData.fullname=t),label:"FullName",required:""},null,8,["modelValue"]),e(d,{modelValue:l.editFormData.email,"onUpdate:modelValue":a[1]||(a[1]=t=>l.editFormData.email=t),label:"Email",type:"email",required:""},null,8,["modelValue"]),e(d,{modelValue:l.editFormData.username,"onUpdate:modelValue":a[2]||(a[2]=t=>l.editFormData.username=t),label:"Username",required:""},null,8,["modelValue"]),l.editingUser?w("",!0):(u(),p(d,{key:0,modelValue:l.editFormData.password,"onUpdate:modelValue":a[3]||(a[3]=t=>l.editFormData.password=t),label:"Password",type:"password",required:""},null,8,["modelValue"])),g("div",A,[e(n,{label:"Cancel",flat:"",onClick:r.closeDialog},null,8,["onClick"]),e(n,{label:"Save",type:"submit",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var X=U(k,[["render",E]]);export{X as default};

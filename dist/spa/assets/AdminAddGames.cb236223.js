import{Q as g}from"./QImg.8c01a0f0.js";import{Q as u,a as D,b}from"./QTable.686b00a8.js";import{_,ao as m,R as c,V as G,U as o,f as e,$ as r,a4 as k,a3 as p,Z as y,ap as Q,S as V,X as v}from"./index.c99f8be1.js";import{a as w,Q as f}from"./QCard.a453ff6c.js";import{Q as n}from"./QInput.7902c6d2.js";import{Q as F}from"./QForm.9535495d.js";import{Q as C}from"./QPage.9bc20ae8.js";import"./use-dark.40dd0812.js";import"./QItem.f34ee267.js";import"./use-timeout.870d955a.js";import"./use-key-composition.6e228c43.js";const x={name:"AdminAddGames",data(){return{columns:[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"gamename",align:"center",label:"Game Name",field:"name",sortable:!0},{name:"image_url",align:"center",label:"Image",field:"image_url",sortable:!0},{name:"package",align:"center",label:"Package",field:"package",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"actions",sortable:!1}],games:[],dialog:!1,dialogTitle:"",editingGame:!1,editFormData:{id:null,name:"",image_url:"",package:0}}},methods:{openAddGameDialog(){this.editingGame=!1,this.dialogTitle="Add New Game",this.editFormData={id:null,name:"",image_url:"",package:0},this.dialog=!0},closeDialog(){this.dialog=!1},saveGame(){const i=this.editingGame?"put":"post",l=this.editingGame?`/game/${this.editFormData.id}`:"/game/";this.$api[i](l,this.editFormData).then(d=>{m.create({type:"positive",message:`User ${this.editingGame?"updated":"added"} successfully!`}),this.dialog=!1,this.getData()}).catch(d=>{m.create({type:"negative",message:`Error ${this.editingGame?"updating":"adding"} game: `+d.message})})},getData(){this.$api.get("/game/").then(i=>{this.games=i.data}).catch(i=>{m.create({type:"negative",message:"Error fetching users: "+i.message})})},openEditGameDialog(i){this.editingGame=!0,this.dialogTitle="Edit Game",this.editFormData={...i},this.dialog=!0},onDelete(i){this.$api.delete(`/game/${i}`).then(()=>{m.create({type:"positive",message:"User deleted successfully!"}),this.getData()}).catch(l=>{m.create({type:"negative",message:"Error deleting user: "+l.message})})}},mounted(){this.getData()}},A={class:"q-ml-sm"},E={key:0,class:"q-mt-md"},I={class:"q-mt-md"};function N(i,l,d,U,t,s){return c(),G(C,{padding:""},{default:o(()=>[e(D,{rows:t.games,columns:t.columns,"row-key":"id"},{"body-cell-image":o(a=>[e(u,{props:a},{default:o(()=>[e(g,{src:a.row.image_url,style:{"max-width":"50px","max-height":"50px"}},null,8,["src"])]),_:2},1032,["props"])]),"body-cell-actions":o(a=>[e(u,{props:a},{default:o(()=>[e(r,{flat:"",icon:"edit",onClick:h=>s.openEditGameDialog(a.row)},null,8,["onClick"]),e(r,{flat:"",icon:"delete",onClick:h=>s.onDelete(a.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),e(r,{color:"primary",label:"Add New Game",onClick:s.openAddGameDialog},null,8,["onClick"]),e(b,{modelValue:t.dialog,"onUpdate:modelValue":l[3]||(l[3]=a=>t.dialog=a),persistent:""},{default:o(()=>[e(w,null,{default:o(()=>[e(f,{class:"row items-center"},{default:o(()=>[e(k,{icon:"gamepad",color:"primary","text-color":"white"}),p("span",A,y(t.editingGame?"Edit":"Add")+" Game",1)]),_:1}),e(f,null,{default:o(()=>[e(F,{onSubmit:Q(s.saveGame,["prevent"])},{default:o(()=>[e(n,{modelValue:t.editFormData.name,"onUpdate:modelValue":l[0]||(l[0]=a=>t.editFormData.name=a),label:"Game Name",required:""},null,8,["modelValue"]),e(n,{modelValue:t.editFormData.image_url,"onUpdate:modelValue":l[1]||(l[1]=a=>t.editFormData.image_url=a),label:"Image URL",type:"url",required:"",onInput:i.updateImage},null,8,["modelValue","onInput"]),t.editFormData.image_url?(c(),V("div",E,[e(g,{src:t.editFormData.image_url,style:{"max-width":"200px","max-height":"200px"}},null,8,["src"])])):v("",!0),e(n,{modelValue:t.editFormData.package,"onUpdate:modelValue":l[2]||(l[2]=a=>t.editFormData.package=a),label:"Package",type:"number",required:""},null,8,["modelValue"]),p("div",I,[e(r,{label:"Cancel",flat:"",onClick:s.closeDialog},null,8,["onClick"]),e(r,{label:"Save",type:"submit",color:"primary"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var z=_(x,[["render",N]]);export{z as default};

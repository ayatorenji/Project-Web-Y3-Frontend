import{_ as c,ao as i,a1 as p,R as f,V as g,U as a,a3 as o,f as t,W as u,ap as h,$ as y,Y as _}from"./index.c99f8be1.js";import{Q as d}from"./QInput.7902c6d2.js";import{Q as w}from"./QForm.9535495d.js";import{Q as x,a as b}from"./QCard.a453ff6c.js";import{Q as v}from"./QPage.9bc20ae8.js";import{u as U}from"./loginUserStore.d6c81401.js";import"./use-key-composition.6e228c43.js";import"./use-dark.40dd0812.js";const L={name:"LoginPage",data(){return{username:null,password:null,isPwd:!0,storeLogUser:U()}},methods:{onReset(){this.username=null,this.password=null,this.isPwd=!0},onSubmit(){const l={username:this.username,password:this.password};this.$api.post("/auth/login",l).then(e=>{e.status==200&&(i.create({type:"positive",message:"Login successfully."}),this.storeLogUser.userid=e.data.id,this.storeLogUser.fullname=e.data.fullname,this.storeLogUser.username=e.data.username,this.storeLogUser.accessToken=e.data.accessToken,this.storeLogUser.userType="user",this.$router.push("/user/dashboard"))}).catch(e=>{console.log(e),i.create({type:"negative",message:"Invalid Username or Password."})}),this.$refs.myLoginForm.reset()}}},P=o("div",{style:{"text-align":"center"}},[o("h2",null,"User login")],-1),Q={class:"flex justify-center"},V={class:"flex flex-center"},S=o("a",{href:"/register"},"Create an Account",-1);function C(l,e,k,N,r,n){const m=p("text-caption");return f(),g(v,null,{default:a(()=>[P,o("div",Q,[t(b,{class:"my-card bg-grey-1 q-px-xl q-py-xl",style:{width:"25rem"}},{default:a(()=>[o("div",V,[t(u,{name:"account_circle",color:"grey-6",size:"4rem"})]),t(x,null,{default:a(()=>[t(w,{onSubmit:h(n.onSubmit,["prevent"]),onReset:n.onReset,class:"q-gutter-md",ref:"myLoginForm"},{default:a(()=>[o("div",null,[t(d,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=s=>r.username=s),type:"text",label:"Your Username","lazy-rules":"",rules:[s=>s&&s.length>0||"Must be at least 1 character!"]},null,8,["modelValue","rules"])]),o("div",null,[t(d,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=s=>r.password=s),type:r.isPwd?"password":"text",label:"Your Password","lazy-rules":"",rules:[s=>s&&s.length>=6||"Must be at least 6 characters"]},{append:a(()=>[t(u,{name:r.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=s=>r.isPwd=!r.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),o("div",null,[t(y,{label:"Submit",type:"submit",color:"primary",style:{width:"100%"}})]),o("div",null,[t(m,{class:"text-cyan-8"},{default:a(()=>[_(" Not registered? "),S]),_:1})])]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})])]),_:1})}var Y=c(L,[["render",C]]);export{Y as default};
